<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Metadataplayer docs: integration.en</title>
</head>
<body>
<h1>Integrating the Metadataplayer in an HTML page</h1>
<p>WARNING !
This documentation refers to the latest version of Metadataplayer, available in the <strong>default</strong> branch in our repository
http://www.iri.centrepompidou.fr/dev/hg/metadataplayer</p>
<h2>Loading the script</h2>
<p>The <em>LdtPlayer-core.js</em> must be declared in the HTML header.</p>
<pre><code>&lt;head&gt;
    &lt;meta http-equiv="Content-type" content="text/html; charset=utf-8" /&gt;
    &lt;title&gt;Metadataplayer integration test&lt;/title&gt;
    &lt;script type="text/javascript" src="metadataplayer/LdtPlayer-core.js" type="text/javascript"&gt;&lt;/script&gt;
&lt;/head&gt;
</code></pre>
<h2>Declaration of a container HTML element</h2>
<pre><code>&lt;body&gt;
    &lt;div id="Metadataplayer"&gt;&lt;/div&gt;
</code></pre>
<p>The script for configuring and loading the Metadataplayer must be executed after this element is declared either by :
    - Adding a &lt;<em>script</em>&gt; element at the bottom of the page
    - Using an event such as <em>body.onload</em>
    - Using jQuery's <em>$(function(){})</em> syntax or an equivalent in your favorite framework</p>
<pre><code>&lt;script type="text/javascript"&gt;
</code></pre>
<h2>Interface language configuration</h2>
<p>Language is defined ISO 639-1 (e.g., "es" pour lâ€™Espagnol, "ja" pour le Japonais, "eu" pour le Basque). As of July 2012, only English ("en") and French ("fr") are available.</p>
<pre><code>IriSP.language = "fr";
</code></pre>
<h2>Library location configuration</h2>
<p>By default (as defined in <em>defaults.js</em>), librairies are loaded from either a CDN (Content Distribution Network) or from the <em>js/libs</em> directory.</p>
<p>Configuration is done by overriding the properties of <em>IriSP.libFiles</em></p>
<p>To use the CDN:</p>
<pre><code>IriSP.libFiles.useCdn = true;
</code></pre>
<p>To change the location of the library directory:</p>
<pre><code>IriSP.libFiles.defaultDir = "/path/libs";
</code></pre>
<p>To change individual locations or to point to files outside the default directory:</p>
<pre><code>IriSP.libFiles.locations.jQueryUI = "libs/jquery-ui-1.8.16.custom.min.js";
IriSP.libFiles.locations.jwPlayerSWF = "libs/jwplayer/player.swf";
</code></pre>
<h2>Configuration of a metadata source</h2>
<p>A metadata source is defined by its url and file type (which defines the <em>serializer</em> to use).</p>
<p>Example:</p>
<pre><code>var metadataSource = {
    url: "data/mydata.json",
    type: "ldt"
};
</code></pre>
<p>Metadata sources are then used to configure both the video player and the widgets.</p>
<h2>Configuration of the video player</h2>
<p>In this version, the video player is now a widget. This section is therefore obsolete</p>
<h2>User Interface Configuration</h2>
<p>The interface is configured with the following properties:</p>
<ul>
<li><strong>container</strong>: ID of the DOM element in which the metadataplayer will be instantiated.</li>
<li><strong>width</strong> et <strong>height</strong>: width and height of the interface (<em>height</em> is optional).</li>
<li><strong>default_options</strong>: Configuration options that will be passed to all widgets. In the example below, all widgets will connect to the same metadata source.</li>
<li><strong>css</strong>: The URL of the base CSS stylesheet (LdtPlayer-core.css)</li>
<li><strong>widgets</strong>: A list of widgets, in the following format: [ { type: <em>Widget type</em>, option_1: <em>Option 1 value</em> } ]. For widget options, please refer to the <em>general architecture</em> document</li>
</ul>
<p>Exemple:</p>
<pre><code>var config = {
    container : "Metadataplayer",
    default_options: {
        metadata: metadataSource
    },
    css : "metadataplayer/css/LdtPlayer-core.css",
    widgets: [
        {
            type: "AutoPlayer"
        },
        {
            type: "Slider"
        },{
            type: "Controller",
            disable\_annotate\_btn: true
        },{
            type: "Segments",
            annotation\_type: "Chapters"
        },{
            type: "AnnotationsList",
            container: "AnnotationsListContainer"
        }
    ]
};
</code></pre>
<h2>Player instanciation</h2>
<p>The metadataplayer is instantiated by creating an object of class <strong>IriSP.Metadataplayer</strong>.</p>
<p>Exemple:</p>
<pre><code>var myPlayer = new IriSP.Metadataplayer(config);
</code></pre>
</body>
</html>