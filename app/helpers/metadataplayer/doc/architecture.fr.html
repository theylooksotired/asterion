<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Metadataplayer docs: architecture.fr</title>
</head>
<body>
<h1>Architecture du Metadataplayer</h1>
<p>ATTENTION !
Cette documentation se réfère à la dernière version du Metadataplayer, disponible dans la branche <strong>default</strong> du repository
http://www.iri.centrepompidou.fr/dev/hg/metadataplayer</p>
<h2>Bibliothèques extérieures</h2>
<p>Les bibliothèques utilisées par le Metadataplayer sont regroupées dans <em>src/libs</em></p>
<h3>LAB.js</h3>
<ul>
<li><strong>Fichier</strong>: LAB.min.js</li>
<li><strong>Licence</strong>: MIT.</li>
<li><strong>Rôle</strong>: Charge les autres bibliothèques extérieures et les widgets.</li>
<li><strong>Utilisé par</strong>: Code principal.</li>
<li>Du fait de ce mode de chargement, il s’agit de la seule bibliothèque nécessaire au moment de l’initialisation du code.</li>
<li><strong>Site</strong>: http://labjs.com/</li>
</ul>
<h3>jQuery</h3>
<ul>
<li><strong>Fichier</strong>: jquery.min.js</li>
<li><strong>Licence</strong>: Double, MIT et GPL.</li>
<li><strong>Rôle</strong>: Gère les actions du code sur la structure du document HTML (DOM)</li>
<li><strong>Utilisé par</strong>: Code principal et tous les widgets.</li>
<li><strong>Site</strong>: http://jquery.org/</li>
</ul>
<h3>jQuery UI</h3>
<ul>
<li><strong>Fichiers</strong>: jquery-ui.min.js et jquery-ui.css</li>
<li><strong>Licence</strong>: Double, MIT et GPL.</li>
<li><strong>Rôle</strong>: Fournit des éléments d’interface utilisateurs, tels que <em>Sliders</em></li>
<li><strong>Utilisé par</strong>: Widgets, Controller (pour le volume) et Slider (pour le <em>Slider de progression</em>)</li>
<li><strong>Site</strong>: http://jqueryui.com/</li>
</ul>
<h3>Underscore</h3>
<ul>
<li><strong>Fichier</strong>: underscore-min.js</li>
<li><strong>Licence</strong>: MIT.</li>
<li><strong>Rôle</strong>: Fournit des fonctionnalités orientées programmation fonctionnelle pour manipuler tableaux, objets et fonctions.</li>
<li><strong>Utilisé par</strong>: Code principal et widgets.</li>
<li><strong>Site</strong>: http://documentcloud.github.com/underscore/</li>
</ul>
<h3>Popcorn</h3>
<ul>
<li><strong>Fichier</strong>: popcorn-complete.min.js</li>
<li><strong>Licence</strong>: MIT.</li>
<li><strong>Rôle</strong>: Fournit une gestion de la lecture de vidéos HTML5.</li>
<li><strong>Utilisé par</strong>: Players HTML5 et Youtube, ainsi que pour la communication avec le reste du Metadataplayer lorsque l’un de ces players est utilisé.</li>
<li><strong>Site</strong>: http://popcornjs.org/</li>
</ul>
<h3>Mustache</h3>
<ul>
<li><strong>Fichier</strong>: mustache.js</li>
<li><strong>Licence</strong>: MIT.</li>
<li><strong>Rôle</strong>: Permet de remplir des gabarits (<em>templates</em>) HTML.</li>
<li><strong>Utilisé par</strong>: widgets.</li>
<li><strong>Site</strong>: http://mustache.github.com/</li>
</ul>
<h3>Raphael</h3>
<ul>
<li><strong>Fichier</strong>: raphael-min.js</li>
<li><strong>Licence</strong>: MIT.</li>
<li><strong>Rôle</strong>: Fournit une interface de dessin vectoriel (utilise SVG ou VML selon les navigateurs)</li>
<li><strong>Utilisé par</strong>: Widgets Arrow et Sparkline</li>
<li><strong>Site</strong>: http://raphaeljs.com/</li>
</ul>
<h3>ZeroClipboard</h3>
<ul>
<li><strong>Fichiers</strong>: ZeroClipboard.js et ZeroClipboard.swf</li>
<li><strong>Licence</strong>: MIT.</li>
<li><strong>Rôle</strong>: Permet l’accès au presse-papiers (using Flash)</li>
<li><strong>Utilisé par</strong>: Widget Social</li>
<li><strong>Site</strong>: http://code.google.com/p/zeroclipboard/</li>
</ul>
<h3>ktbs4js Tracemanager</h3>
<ul>
<li><strong>Fichier</strong>: tracemanager.js</li>
<li><strong>Licence</strong>: LGPL.</li>
<li><strong>Rôle</strong>: Permet de s’interfacer avec le système de gestion de traces KTBS, créé par Olivier Aubert (Liris)</li>
<li><strong>Utilisé par</strong>: TraceWidget</li>
<li><strong>Site</strong>: http://github.com/oaubert/ktbs4js</li>
</ul>
<h2>Code principal (core) du Metadataplayer</h2>
<p>Dans la version <em>release</em> du metadataplayer, les fichiers Javascript et CSS sont répartis entre le <em>core</em> et les <em>widgets</em>.</p>
<p><em>LdtPlayer-core.js</em> est compilé à partir de plusieurs fichiers Javascript situés (sauf LAB.min.js) dans <em>src/js</em>:</p>
<h3>header.js</h3>
<p>Contient les crédits du Metadataplayer, ainsi que les informations sur la licence (<em>CeCILL-C</em>)</p>
<h3>LAB.js</h3>
<p>cf. Bibliothèques extérieures.</p>
<h3>init.js</h3>
<p>Définit l’objet <em>IriSP</em>, qui sert d’espace de nommage pour tout le Metadataplayer.
Contient la classe <em>IriSP.Metadataplayer</em>, dont l’instanciation est la porte d’entrée principale du code.</p>
<h3>pop.js</h3>
<p>Contient <em>IriSP.PopcornReplacement</em>, c’est à dire une version simplifiée de Popcorn pour communiquer avec des lecteurs vidéos non-supportés par Popcorn.
Au moment de la création de cette partie, l’interfaçage Popcorn-jwplayer n’était pas satisfaisant, à remplacer éventuellement par de vrais players/plugins pour Popcorn.</p>
<h3>utils.js</h3>
<p>Contient quelques fonctions utilitaires, telles que <em>IriSP.loadCss</em>, qui est l’équivalent pour les fichiers CSS de LAB.js.</p>
<h3>model.js</h3>
<p>Contient les classes de gestion du modèle de données Cinelab, regroupées sous l’espace de nommage <em>IriSP.Model</em>.</p>
<h3>widgets.js</h3>
<p>Contient la classe de base <em>IriSP.Widgets.Widget</em>, qui fournit les fonctionnalités de base pour les widgets.</p>
<h3>players</h3>
<p>Les fichiers de ce répertoire permettent d’interfacer le <em>Popcorn Replacement</em> (cf. <em>pop.js</em>) avec des lecteurs vidéo tiers.</p>
<p>Existent actuellement:</p>
<ol>
<li><strong>player.jwplayer</strong>, pour communiquer avec JwPlayer, utilisé pour lire des flux RTMP sur la plateforme <em>Ligne de temps</em></li>
<li><strong>player.dailymotion</strong>, pour lire des vidéos du <em>Youtube à la française</em></li>
<li><strong>player.allocine</strong>, pour le player de allocine.net</li>
<li><strong>player.mashup</strong>, pour le player de bout à bout Flash créé par Thibaut Cavalié.</li>
<li><strong>player.htmlMashup</strong>, pour le lecteur de bout à bout de vidéos HTML5 basé sur Popcorn.</li>
</ol>
<h3>serializers</h3>
<p>Les Sérialiseurs servent d’interface entre les formats de données utilisés pour les échanges avec les serveurs.</p>
<p>Deux sérialiseurs existent à l’heure actuelle:</p>
<ol>
<li><strong>ldt</strong>, pour lire les flux JSON fournis par la plateforme <em>Lignes de Temps</em>.</li>
<li><strong>ldt_annotate</strong>, pour communiquer avec l’API d’ajout d’annotations de la plateforme, dont le format est légèrement différent.</li>
</ol>
<h2>Widgets</h2>
<p>Les Widgets sont des modules, visibles ou non, permettant de rajouter des fonctionnalités au Metadataplayer.</p>
<p>Situés dans le répertoire <em>src/widgets</em>, ils contiennent nécessairement un fichier de code <em>NomDuWidget.js</em> et, optionnellement un fichier de style <em>NomDuWidget.css</em></p>
<h4>Options courantes</h4>
<ul>
<li><strong>metadata</strong>, source de métadonnées, sous la forme { url: <em>URL de la source de données</em>, type: <em>Type de sérialiseur utilisé</em> }</li>
<li><strong>container</strong>, à utiliser seulement si le widget ne doit pas être aligné en dessous des autres widgets, pour spécifier l’ID de l’élément HTML dans lequel il doit être affiché.</li>
<li><strong>annotation_type</strong>, dans les widgets affichant des annotations. Cette option peut prendre les valeurs suivantes:<ul>
<li>Chaîne de caractères: prend en compte les types d’annotations dont le titre contient la chaîne. Exemple: "chap" permet notamment d’afficher les annotations dans le type d’annotation "Chapitrage"</li>
<li>Tableau de chaînes: pour prendre en compte plusieurs types d’annotations</li>
<li>false: pour prendre en compte toutes les annotations du projet</li>
</ul>
</li>
<li><strong>requires</strong>, qui permet d’encapsuler un widget dans un autre.</li>
</ul>
<p>Voici la liste des widgets actuellement disponibles, avec leurs options:</p>
<h3>Annotation</h3>
<ul>
<li><strong>Rôle</strong>: Affiche les informations relatives à une annotation au moment où celle-ci est jouée</li>
<li><strong>Options</strong>:<ul>
<li><strong>annotation_type</strong>: (défaut: "chapitrage"), cf. <em>Options courantes</em>, plus haut.</li>
<li><strong>show_top_border</strong>: (défaut: false), afficher ou non la bordure en haut du widget (au cas où il est utilisé sans/avec le widget <em>Arrow</em>)</li>
<li><strong>site_name</strong>: "Lignes de Temps", nom du site à afficher lorsque l’on clique sur les boutons de partage pour réseaux sociaux.</li>
</ul>
</li>
<li>Utilise un fichier CSS: oui</li>
</ul>
<h3>AnnotationsList</h3>
<ul>
<li><strong>Rôle</strong>: Affiche une liste d’annotations</li>
<li><strong>Options</strong>:<ul>
<li><strong>ajax_url</strong>: (défaut: false), spécifie un gabarit d’URL lorsque les annotations doivent être chargées par une API spécifique (API de segment). Dans l’URL, {{media}} sera remplacé par l’ID du média, {{begin}} par le <em>timecode</em> de début en millisecondes, {{end}} par le <em>timecode</em> de fin en millisecondes. Si le réglage est à <em>false</em>, les annotations affichées seront celles chargées à l’initialisation du Widget. Sur la plateforme <em>Lignes de Temps</em>, cette URL est http://ldt.iri.centrepompidou.fr/ldtplatform/api/ldt/segments/{{media}}/{{begin}}/{{end}}?callback=?</li>
<li><strong>ajax_granularity</strong>: (défaut: 300000 ms = 5 minutes), spécifie la durée qui doit être chargée par l’API de segment, de part et d’autre du timecode courant (cf. ci-dessus) </li>
<li><strong>default_thumbnail</strong>: imagette à afficher par défaut à côté d’une annotation lorsque l’annotation n’a pas d’imagette.</li>
<li><strong>foreign_url</strong>: spécifie un gabarit d’URL lorsque l’annotation n’a pas d’information d’URL et que l’annotation est dans un autre projet. Dans l’URL, {{media}} sera remplacé par l’ID du média, {{project}} par l’ID du projet, {{annotationType}} par l’ID du type d’annotation, {{annotation}} par l’ID de l’annotation. Sur la plateforme <em>Lignes de temps</em>, cette URL est http://ldt.iri.centrepompidou.fr/ldtplatform/ldt/front/player/{{media}}/{{project}}/{{annotationType}}#id={{annotation}}</li>
<li><strong>annotation_type</strong>: (défaut: false), cf. <em>Options courantes</em>, plus haut.</li>
<li><strong>refresh_interval</strong>: (défaut: 0), intervalle auquel le widget recharge en Ajax la liste des annotations (que l’on utilise l’API de segment ou non)</li>
<li><strong>limit_count</strong>: (défaut: 10), nombre maximum d’annotations à afficher simultanément.</li>
<li><strong>newest_first</strong>: (défaut: false), <em>true</em>: classe les annotations par ordre antéchronologique de création, <em>false</em>: classe les annotations par ordre chronologique de leur timecode vidéo.</li>
</ul>
</li>
<li>Utilise un fichier CSS: oui</li>
</ul>
<h3>Arrow</h3>
<ul>
<li><strong>Rôle</strong>: Dessine la flèche indiquant la position de l’annotation</li>
<li><strong>Options</strong>:<ul>
<li><strong>arrow_height</strong>: (défaut: 16), hauteur en pixels de la flèche</li>
<li><strong>arrow_width</strong>: (défaut: 24), largeur en pixels de la flèche</li>
<li><strong>base_height</strong>: (défaut: 0), hauteur entre le bas de la flèche et le bas du widget. Nécessaire si l’on souhaite faire un widget aux bords arrondis.</li>
<li><strong>base_curve</strong>: (défaut: 0), rayon de courbure des bords arrondis du widget.</li>
<li><strong>fill_url</strong>: URL d’une image de remplissage pour le widget</li>
<li><strong>fill_color</strong>: (défaut: "#ffffff" = blanc), couleur de remplissage du widget. Peut-être remplacé par un dégradé sous la forme angle en degrés-couleur de début-couleur de fin, ex: "90-#000-#fff"</li>
<li><strong>stroke_color</strong>: (défaut: "#b7b7b7" = gris), couleur de la bordure du widget.</li>
<li><strong>stroke_width</strong>: (défaut: 1.5), épaisseur en pixels de la bordure du widget.</li>
<li><strong>animation_speed</strong>: (défaut: 20), vitesse de déplacement de la flèche.</li>
<li><strong>pilot_widget</strong>: (défaut: "Annotation"), widget commandant la position de la flèche.</li>
</ul>
</li>
<li>Utilise la bibliothèque: Raphael</li>
<li>Utilise un fichier CSS: non</li>
</ul>
<h3>Controller</h3>
<ul>
<li><strong>Rôle</strong>: Boutons Lecture/Pause, Rechercher, Ouvrir l’annotateur et contrôle du volume</li>
<li><strong>Options</strong>:<ul>
<li><strong>disable_annotate_btn</strong>: (défaut: false), permet de désactiver le bouton d’ouverture de l’annotateur s’il est à <em>true</em></li>
<li><strong>disable_search_btn</strong>: (défaut: true), permet de désactiver le bouton de recherche d’annotations</li>
</ul>
</li>
<li>Utilise la bibliothèque: jQuery UI</li>
<li>Utilise un fichier CSS: oui</li>
</ul>
<h3>CreateAnnotation</h3>
<ul>
<li><strong>Rôle</strong>: Permet de créer une annotation en affichant un formulaire</li>
<li><strong>Options</strong>:<ul>
<li><strong>show_title_field</strong>: (défaut: true), affiche un champ permettant de saisir le titre de l’annotation.</li>
<li><strong>creator_name</strong>: nom d’utilisateur du créateur de l’annotation.</li>
<li><strong>creator_avatar</strong>: URL de l’image de profil du créateur de l’annotation.</li>
<li><strong>tags</strong>: (défaut: false), liste des tags à afficher, sous la forme d’un tableau d’objets type [ { id: "tag-001", title: "" } ]. Si la valeur est false, affiche les tags les plus utilisés du projet.</li>
<li><strong>max_tags</strong>: (défaut: 8), nombre de tags à afficher.</li>
<li><strong>polemics</strong>: boutons polémiques à afficher, sous la forme d’un tableau d’objets indiquant mot-clé à ajouter, couleur du fond du bouton, couleur du bouton, ex: [ { keyword: "++", background_color: "#00a000", text_color: "#ffffff" } ]</li>
<li><strong>annotation_type</strong>: (défaut: "Contributions"), cf. <em>Options courantes</em>, plus haut.</li>
<li><strong>api_serializer</strong>: (défaut: "ldt_annotate"), sérialiseur à utiliser pour l’envoi des annotations.</li>
<li><strong>api_endpoint_template</strong>: URL de l’API, où {{id}} est remplacé par l’ID du projet, ex: "http://ldt.iri.centrepompidou.fr/ldtplatform/api/ldt/annotations/{{id}}.json".</li>
<li><strong>api_method</strong>: (défaut: "PUT"), méthode HTTP utilisée pour envoyer les annotations. La plateforme <em>Lignes de temps</em> utilise PUT, mais cette méthode devrait être réservée pour la création d’une ressource dont l’URL est connue à l’avance.</li>
<li><strong>close_widget_timeout</strong>: (défaut: 0), durée en millisecondes avant que le widget ne soit refermé après l’envoi d’une annotation. Si la valeur est 0, le widget ne se referme pas.</li>
</ul>
</li>
<li>Utilise un fichier CSS: oui</li>
</ul>
<h3>HelloWorld</h3>
<ul>
<li><strong>Rôle</strong>: Widget d’exemple démontrant l’API de création de widgets</li>
<li><strong>Options</strong>:<ul>
<li><strong>text</strong>: (défaut: "world"), texte à afficher après "Hello, "</li>
</ul>
</li>
<li>Utilise un fichier CSS: oui</li>
</ul>
<h3>Media</h3>
<ul>
<li><strong>Rôle</strong>: Affiche le média en cours, ainsi que la liste des autres médias du projet. Utilisé principalement pour les mashups</li>
<li><strong>Options</strong>:<ul>
<li><strong>default_thumbnail</strong>: imagette à afficher par défaut à côté d’un média lorsque le média n’a pas d’imagette.</li>
<li><strong>media_url_template</strong>: spécifie un gabarit d’URL lorsque le média n’a pas d’information d’URL, par exemple: "http://ldt.iri.centrepompidou.fr/ldtplatform/ldt/front/player/{{media}}/"</li>
</ul>
</li>
<li>Utilise un fichier CSS: oui</li>
</ul>
<h3>Mediafragment</h3>
<ul>
<li><strong>Rôle</strong>: Gère les URLs à la norme <em>Mediafragment</em>: change la position de la tête de lecture en fonction de l’URL et inversement.</li>
<li>Une URL finissant par #id=<em>id de l’annotation</em> pointe sur une annotation, par #t=<em>temps en secondes</em> vers un timecode de la vidéo.</li>
<li>Pas d’options</li>
<li>Utilise un fichier CSS: non.</li>
</ul>
<h3>Polemic</h3>
<ul>
<li><strong>Rôle</strong>: Affiche la <em>timeline polémique</em>, c’est à dire les tweets colorés en fonction de la syntaxe polémique. Selon le volume de tweets, deux modes de représentation existent:<ul>
<li>Avec un faible volume, les tweets sont des carrés dessinés individuellement.</li>
<li>Avec un volume élevé, les colonnes présentent les volumes agrégés de tweets par couleur.</li>
</ul>
</li>
<li><strong>Options</strong>:<ul>
<li><strong>element_width</strong>: (défaut: 5), largeur en pixels d’une tranche de tweets.</li>
<li><strong>element_height</strong>: (défaut: 5), hauteur en pixels d’un tweet, en mode faible volume.</li>
<li><strong>max_elements</strong>: (défaut: 15), nombre de tweets dans une colonne à partir duquel le mode de représentation change.</li>
<li><strong>annotation_type</strong>: (défaut: "tweet"), cf. <em>Options courantes</em>, plus haut.</li>
<li><strong>defaultcolor</strong>: (défaut: "#585858" = gris), couleur des tweets qui n’ont pas d’annotation polémique.</li>
<li><strong>foundcolor</strong>: (défaut: "#fc00ff" = mauve), couleur d’affichage des tweets correspondant à un résultat de recherche.</li>
<li><strong>polemics</strong>: couleurs polémiques à afficher, en fonction d’une recherche de termes, type [ { keywords: [ "++" ], color: "#1D973D" } ]</li>
</ul>
</li>
<li>Utilise un fichier CSS: oui</li>
</ul>
<h3>Renkan</h3>
<ul>
<li><strong>Rôle</strong>: Interface avec le projet <em>Renkan</em></li>
<li>Utilise les bibliothèques: jQuery Mousewheel, Backbone, Backbone Relational, Renkan-Publish</li>
<li>Utilise un fichier CSS: oui</li>
</ul>
<h3>Segments</h3>
<ul>
<li><strong>Rôle</strong>: Affiche le <em>chapitrage</em> du média, en horizontal.</li>
<li><strong>Options</strong>:<ul>
<li><strong>colors</strong>: liste de couleurs à utiliser lorsque les annotations ne contiennent pas d’information de couleur.</li>
<li><strong>height</strong>: hauteur du widget</li>
</ul>
</li>
<li>Utilise un fichier CSS: oui</li>
</ul>
<h3>Slider</h3>
<ul>
<li><strong>Rôle</strong>: Barre de progression et <em>Slider</em> indiquant la position de la tête de lecture vidéo et permettant de la déplacer.</li>
<li><strong>Options</strong>:</li>
<li><strong>minimized_height</strong>: (défaut: 4), hauteur en pixels du <em>Slider</em> en mode minimisé</li>
<li><strong>maximized_height</strong>: (défaut: 10), hauteur en pixels du <em>Slider</em> en mode maximisé (lorsque la souris passe dessus)</li>
<li><strong>minimize_timeout</strong>: (défaut: 1500), durée en millisecondes avant que le <em>Slider</em> ne se minimise. À une valeur de 0, le <em>Slider</em> ne se minimise plus.</li>
<li>Utilise la bibliothèque: jQuery UI</li>
<li>Utilise un fichier CSS: oui</li>
</ul>
<h3>Social</h3>
<ul>
<li><strong>Role</strong>: Affiche des boutons pour partager une URL sur les réseaux sociaux</li>
<li><strong>Options</strong>:<ul>
<li><strong>text</strong>: un texte à afficher (dans le tweet, etc.)</li>
<li><strong>url</strong>: l’URL à partager</li>
<li><strong>show_url</strong>: Affiche un bouton pour copier-coller une URL.</li>
<li><strong>show_twitter</strong>: Affiche un bouton pour partager sur Twitter.</li>
<li><strong>show_fb</strong>: Affiche un bouton pour partager sur Facebook.</li>
<li><strong>show_gplus</strong>: Affiche un bouton pour partager sur Google+.</li>
<li><strong>show_mail</strong>: Affiche un bouton pour partager par e-mail.</li>
</ul>
</li>
<li>Utilise un fichier CSS: oui.</li>
<li>Utilise la bibliothèque: ZeroClipboard</li>
</ul>
<h3>Sparkline</h3>
<ul>
<li><strong>Rôle</strong>: Affiche une courbe indiquant l’évolution du volume d’annotations au cours du temps.</li>
<li><strong>Options</strong>:<ul>
<li><strong>annotation_type</strong>: cf. <em>Options courantes</em>, plus haut.</li>
<li><strong>lineColor</strong>: (défaut: "#7492b4" = gris-bleu), couleur de la courbe</li>
<li><strong>fillColor</strong>: (défaut: "#aeaeb8" = gris), couleur de la surface sous la courbe</li>
<li><strong>lineWidth</strong>: (défaut: 2), épaisseur en pixels de la courbe</li>
<li><strong>slice_count</strong>: (défaut: 20), nombre des tranches horaires dans lesquelles les annotations sont réparties pour calculer la courbe</li>
<li><strong>height</strong>: (défaut: 50), hauteur en pixels de la courbe</li>
<li><strong>margin</strong>: (défaut: 5), marge en pixels au-dessus de la courbe</li>
</ul>
</li>
<li>Utilise la bibliothèque: Raphael</li>
<li>Utilise un fichier CSS: non</li>
</ul>
<h3>Tagcloud</h3>
<ul>
<li><strong>Rôle</strong>: Affiche un nuage de mots-clés</li>
<li><strong>Options</strong>:<ul>
<li><strong>include_titles</strong>: (défaut: true), utiliser le contenu du champ titre des annotations pour calculer le nuage de mots-clés.</li>
<li><strong>include_descriptions</strong>: (défaut: true), utiliser le contenu du champ description des annotations pour calculer le nuage.</li>
<li><strong>include_tag_texts</strong>: (défaut: true), utiliser les textes des tags liés aux annotations pour calculer le nuage de mots-clés.</li>
<li><strong>tag_count</strong>: (défaut: 30), nombre maximum de mots-clés à afficher.</li>
<li><strong>stopword_language</strong>: (défaut: "fr"), code de langue correspondant à une liste de mots vides à exclure du nuage.</li>
<li><strong>custom_stopwords</strong>: (défaut: []), liste de mots-vides à exclure du nuage.</li>
<li><strong>exclude_pattern</strong>: (défaut: false), expression régulière à exclure du nuage.</li>
<li><strong>annotation_type</strong>: (défaut: false), cf. <em>Options courantes</em>, plus haut. Concerne les annotations dont les contenus sont utilisés pour calculer le nuage.</li>
<li><strong>segment_annotation_type</strong>: (défaut: false), permet de définir la segmentation du nuage de mots-clés et de calculer un nuage pour chaque segment du type d’annotation choisi. Lorsque ce paramètre est à <em>false</em>, un seul nuage est calculé pour toute la durée de la vidéo.</li>
<li><strong>min_font_size</strong>: (défaut: 10), taille de caractères (en pixels) pour le mot le moins fréquent.</li>
<li><strong>max_font_size</strong>: (défaut: 26), taille de caractères (en pixels) pour le mot le plus fréquent.</li>
</ul>
</li>
<li>Utilise un fichier CSS: oui</li>
</ul>
<h3>Tooltip</h3>
<ul>
<li><strong>Rôle</strong>: Affiche une infobulle, utilisé uniquement comme <em>widget inclus</em> dans d’autres widgets.</li>
<li>Pas d’options</li>
<li>Utilise un fichier CSS: oui</li>
</ul>
<h3>Trace</h3>
<ul>
<li><strong>Rôle</strong>: Envoi des traces au serveur KTBS</li>
<li><strong>Options</strong>:<ul>
<li><strong>js_console</strong>: (défaut: false), écriture ou non des traces dans la console du navigateur.</li>
<li><strong>url</strong>: (défaut: "http://traces.advene.org:5000/"), URL du serveur de traces</li>
<li><strong>requestmode</strong>: (défaut: "GET"), méthode HTTP utilisée pour l’envoi des traces (seul <em>"GET"</em> permet le <em>cross-domain</em>).</li>
<li><strong>syncmode</strong>: (défaut: "sync"), envois groupés (mode <em>"delayed"</em>) ou non (<em>"sync"</em>) des traces</li>
</ul>
</li>
<li>Utilise la bibliothèque: ktbs4js tracemanager</li>
<li>Utilise un fichier CSS: non.</li>
</ul>
<h3>Tweet</h3>
<ul>
<li><strong>Rôle</strong>: Affiche furtivement le contenu d’un tweet</li>
<li><strong>Options</strong>:<ul>
<li><strong>hide_timeout</strong>: (défaut: 5000), durée en millisecondes, avant que l’affichage du Tweet ne se referme</li>
<li><strong>polemics</strong>: identique au paramètre <em>polemics</em> du widget <em>Polemic</em></li>
</ul>
</li>
</ul>
</body>
</html>